
بسم الله الرحمن الرحیم

# چیستی SOAP و REST
هر دوی این تکنولوژی‌های، راه‌کارهای مختلفی برای یک مساله‌اند؛ مساله ایجاد ارتباط و اشتراک میان برنامه‌هایی که از زبان‌های مختلفی ساخته‌شده‌اند و از سکوها و معماری‌های مختلفی استفاده می‌کنند.

نکته‌ای که در مورد این دو تکنولوژی وجود دارد و اغلب مردم را به گمراهی می‌اندازد این است که SOAP یک پروتکل است ولی REST یک شکل معماری است. در میان عامه، هر HTTP APIای را که SOAP نباشد، REST می‌نامند.

## پروتکل SOAP
مخفف پروتکل دسترسی شی ساده (Simple Object Access Protocol) است. 
این پروتکل توسط مایکروسافت برای بهبود تکنولوژی‌های قبلی مانند DCOM و CORBA که مبتنی بر پیام‌نگاری باینری بودند توسعه‌داده‌شد. این پروتکل از قالب XMLبرای پیام‌نگاری استفاده می‌کند. پس از انتشار اولین نسخه این پروتکل توسط مایکروسافت، توسط IETF استانداردگذاری‌شد.

 این پروتکل قواعد محمی برای ارتباط طرفین وضع می‌کند. در صورت تخطی هر یک از طرفین از این قرارداد، پروتکل دچار خطا می‌شود و هیچ گونه مکانیزم تحمل خطایی در این پروتکل تعبیه‌نشده‌است. 

 این پروتکل از ابتدا طوری طراحی‌شده‌است که بسته به کاربرد قابلیت گسترش دارد. این گسترش‌ها در شکل استانداردهای از پیش‌ساخته‌شده مانند WS-Addressing
 ،
 WS-Policy
 ،
 WS-Security
 ،
 WS-Federation
 ،
WS-ReliableMessaging
،
WS-Coordination
،
WS-AtomicTransaction
و
WS-RemotePortlets
تحقق‌یافته‌است. به عنوان مثال، به کاربرد برخی از این پروتکل‌ها می‌پردازیم

* پروتکل امنیت وب‌سرویس، WS-Security، تعیین‌کننده تدابیر امنیتی‌ای چون استفاده از شناسه‌های یکتا به نام توکن است.
* پروتکل آدرس‌دهی وب‌سرویس، WS-Addressing، ناظر بر قراردادن اطلاعات مسیریابی به عنوان ابرداده در پیام است.
* استاندارد پیام‌نگاری اتکاپذیر وب‌سرویس، WS-ReliableMessaging، ناظر بر رفع خطا در پیام‌نگاری است.

باید توجه داشته باشید که شما وابسته به کاربردتان در برنامه‌تان می‌توانید از این پروتکل‌ها استفاده بکنید یا نکنید؛ به عنوان مثال اگر بخواهید یک API عمومی بنویسید، لزومی به استفاده از WS-Security نیست ولی اگر بخواهید یک API خصوصی در دسترس افرادی خاص بنویسید، می‌توانید از این پروتکل استفاده کنید.


پروتکل SOAP از داده‌ساختاری به نام پاکت SOAP به منظور به دست آوردن استقلال از پروتکل انتقال استفاده می‌کند. به عنوان مثال اگر که شما از پروتکل HTTP استفاده می‌کنید، SOAP پیام‌هایتان را در این پاکت‌ها می‌گذارد و این پاکت‌ها درخواست را مطابق با خواسته‌های SOAP تغییر می‌دهند. با این پروتکل شما می‌توانید از هر پروتکل انتقال، مانند TCP، ‌ICMP و STMP استفاده‌کنید. اما باید توجه کنید که در هر صورت، پاسخ دریافتی شما در قالب XML خواهدبود.

سختی نوشتن برنامه با این پروتکل، وابسته به زبانی است که با آن برنامه می‌نویسید! در برخی زبان‌ها بسیار سخت است، چون خودتان باید به صورت دستی درخواست‌ها یا پاسخ‌ها را به قالب XML درآورید و این اتفاق کدتان را پیچیده و طولانی‌تر می‌کند. اما در برخی از زبان‌ها، می‌توانید با استفاده از زبان توصیف وب‌سرویس، WSDL، محدوده و کارکردهای وب‌سرویس‌تان را مشخص کنید و سپس با ارجاع به این WSDL، محیط برنامه‌نویسی‌تان فرآیند توسعه را کاملا خودکار می‌کند.

یکی از ویژگی‌های SOAP، منطق رفع خطایی است که به صورت داخلی در آن تعبیه‌شده‌است. اگر مشکلی در درخواست شما باشد، پاسخ شامل اطلاعات خطا است که به شما در رفع خطا کمک می‌کند. در صورتی که شما مالک وب‌سرویس نباشید ای قابلیت بسیار به شما کمک می‌کند، چرا که در غیر این صورت باید با حدس و گمان منشا خطا را پیدا کنید.


## شکل معماری REST

یک شکل معماری است که ۶ شرط را روی کارکرد API می‌گذارد.

1. معماری کارخواه-کارگذار: فرستنده و گیرنده به لحاظ تکنولوژی، سکو، زبان برنامه‌نویسی و ... از یکدیگر مستقل‌اند.

2. لایه‌بندی: کارگزار می‌تواند متشکل از چندین میانجی‌گر باشد که به منظور تکمیل درخواست کارخواه با هم همکاری می‌کنند، ولی کاربر از این موضوع باخبر نمی‌شود.

3. واسط یکنواخت: داده‌ها را در قالبی استاندارد و کاملا کاربردی بر می‌گرداند.

4. بی‌حالت: هر درخواست مستقل از درخواست‌های قبلی تکمیل می‌شود.

5. قابلیت cacheکردن: سرور می‌تواند داده‌های به‌کرات دسترسی‌شده را cacheکند و همین می‌تواند زمان پاسخ‌گویی را کاهش‌دهد.

6. ارسال کد در صورت نیاز: پاسخ می‌تواند حامل کد باشد.

درخواست‌های REST را با قعل‌های HTTP مانند GET و POST ارسال می‌کنید. پاسخ‌ها در REST APIها اغلب JSONاند ولی می‌توان از قالب‌های داده دیگر مانند XML، HTML و یا متن آشکار نیز استفاده‌کرد. 

# تفاوت‌های SOAP و REST

--- | SOAP | REST
--- | --- | ---
چیستی| پروتکل | شکل معماری
طراحی | در معرض قراردادن توابع و عملیات‌ها | در معرض قراردادن داده
پروتکل انتقال | مستقل از پروتکل | منحصرا HTTP
کارآرایی | پیام‌های بزرگتری دارد و ارتباط را کند می‌کند | پیام‌های کوچکتری دارد و با cache کردن می‌تواند ارتباط را تسریع‌کند
مقیاس‌پذیری | به خاطر حفظ کردن حالت به سختی مقیاس‌پذیر است | به خاطر بی‌حالت بودن به سهولت مقیاس‌پذیر است
موارد استفاده | برنامه‌های قدیمی و APIهای محرمانه | برنامه‌های نوین و APIهای عمومی
اتکاپذیری | SOAP به صورت داخلی شامل منطق رفع خطاست | محتاج تلاش مجدد در صورت شکست ارتباط و اتکاپذیری کمتر
امنیت | با WS-Security می‌توان از محرمانگی پیام‌ها اطمینان حاصل‌کرد | برای ایجاد رابطه محرمانه نیازمند پکیج‌های نرم‌افزاری اضافی است

# منابع و مآخذ
* [amazon](https://aws.amazon.com/compare/the-difference-between-soap-rest/)
* [smartbear](https://smartbear.com/blog/soap-vs-rest-whats-the-difference/)
* [stackoverflow](https://stackoverflow.com/questions/19884295/soap-vs-rest-differences)